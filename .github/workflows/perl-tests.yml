name: Run perl tests
on: [push, pull_request]
jobs:
  test:
    name: Run Perl tests
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@v2
      - run: autoreconf -i
      - name: Install dependencies
        run: PERL_CPANM_OPT=--notest sudo make -f Open-ILS/src/extras/Makefile.install ubuntu-jammy
      - run: ./configure --disable-core --disable-web --disable-client && make
      - name: Run tests
        run: make check
